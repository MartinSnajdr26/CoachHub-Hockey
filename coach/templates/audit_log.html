{% extends "base.html" %}
{% block title %}Audit log{% endblock %}

{% block content %}
<h1>Audit log</h1>
<p style="opacity:0.8; margin:8px 0 16px;">Posledních 200 záznamů pro váš tým.</p>

{% if logs %}
<div class="table-scroll">
  <table>
    <thead>
      <tr>
        <th style="text-align:left; border-bottom:2px solid var(--brand-secondary, #000); padding:6px;">Čas</th>
        <th style="text-align:left; border-bottom:2px solid var(--brand-secondary, #000); padding:6px;">Událost</th>
        <th style="text-align:left; border-bottom:2px solid var(--brand-secondary, #000); padding:6px;">Role</th>
        <th style="text-align:left; border-bottom:2px solid var(--brand-secondary, #000); padding:6px;">IP</th>
        <th style="text-align:left; border-bottom:2px solid var(--brand-secondary, #000); padding:6px;">Meta</th>
      </tr>
    </thead>
    <tbody>
      {% for l in logs %}
        <tr>
          <td style="border-bottom:1px solid #ccc; padding:6px; white-space:nowrap;">{{ l.created_at.strftime('%Y-%m-%d %H:%M:%S') }}</td>
          <td style="border-bottom:1px solid #ccc; padding:6px;">{{ l.event }}</td>
          <td style="border-bottom:1px solid #ccc; padding:6px;">{{ l.role or '-' }}</td>
          <td style="border-bottom:1px solid #ccc; padding:6px;">{{ l.ip_truncated or '-' }}</td>
          <td style="border-bottom:1px solid #ccc; padding:6px;">{{ l.meta or '' }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  </div>
{% else %}
  <p><i>Žádné záznamy</i></p>
{% endif %}

{% endblock %}
