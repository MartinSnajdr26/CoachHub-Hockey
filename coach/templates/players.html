{% extends "base.html" %}
{% block title %}Soupiska hráčů{% endblock %}

{% block content %}
<div style="display:flex; align-items:center; justify-content:space-between; gap:10px;">
<h1>Soupiska hráčů</h1>
  <button type="button" class="help-btn" data-help="players" data-help-src="help-players"><span class="ico">i</span> Nápověda</button>
</div>
<div id="help-players" style="display:none;">
  <h3>Jak pracovat se stránkou Hráči</h3>
  <ul>
    <li>Přidej hráče pomocí formuláře dole, pozice F/D/G.</li>
    <li>Hráče lze upravit nebo odebrat pomocí akcí u jména.</li>
    <li>Hráči z této sekce se používají v Rosteru a Formacích.</li>
  </ul>
</div>

<!-- Formulář pro přidání hráče -->
<form action="{{ url_for('add_player') }}" method="POST" style="margin-bottom:20px;">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    <input type="text" name="name" placeholder="Jméno hráče" required>
    <select name="position" required>
        <option value="">Pozice</option>
        <option value="F">Útočník</option>
        <option value="D">Obránce</option>
        <option value="G">Brankář</option>
    </select>
    <button type="submit">➕ Přidat hráče</button>
</form>

<div class="players-grid">
    <!-- Útočníci -->
    <div>
        <h2 title="Útočníci">Útočníci</h2>
        <ul>
        {% for p in players if p.position == "F" %}
            <li>
                {{ p.name }}
                <!-- Úprava -->
                <a href="{{ url_for('edit_player', player_id=p.id) }}" title="Upravit">✏️</a>
                <!-- Mazání -->
                <form action="{{ url_for('delete_player', player_id=p.id) }}" method="POST" style="display:inline;">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <button type="submit" class="btn-confirm" data-message="Opravdu smazat hráče {{ p.name }}?" title="Smazat">❌</button>
                </form>
            </li>
        {% else %}
            <li><i>Žádní útočníci</i></li>
        {% endfor %}
        </ul>
    </div>

    <!-- Obránci -->
    <div>
        <h2 title="Obránci">Obránci</h2>
        <ul>
        {% for p in players if p.position == "D" %}
            <li>
                {{ p.name }}
                <a href="{{ url_for('edit_player', player_id=p.id) }}" title="Upravit">✏️</a>
                <form action="{{ url_for('delete_player', player_id=p.id) }}" method="POST" style="display:inline;">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <button type="submit" class="btn-confirm" data-message="Opravdu smazat hráče {{ p.name }}?" title="Smazat">❌</button>
                </form>
            </li>
        {% else %}
            <li><i>Žádní obránci</i></li>
        {% endfor %}
        </ul>
    </div>

    <!-- Brankáři -->
    <div>
        <h2 title="Brankáři">Brankáři</h2>
        <ul>
        {% for p in players if p.position == "G" %}
            <li>
                {{ p.name }}
                <a href="{{ url_for('edit_player', player_id=p.id) }}" title="Upravit">✏️</a>
                <form action="{{ url_for('delete_player', player_id=p.id) }}" method="POST" style="display:inline;">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <button type="submit" class="btn-confirm" data-message="Opravdu smazat hráče {{ p.name }}?" title="Smazat">❌</button>
                </form>
            </li>
        {% else %}
            <li><i>Žádní gólmani</i></li>
        {% endfor %}
        </ul>
    </div>
</div>
{% endblock %}
