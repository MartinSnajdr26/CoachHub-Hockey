{% extends "base.html" %}
{% block title %}Nastavení – {{ brand.team_name or 'CoachHub' }}{% endblock %}

{% block content %}
<h1>Nastavení týmu</h1>

<div class="cards">
  <div class="card" style="text-align:left;">
    <h2>🎨 Barvy a logo</h2>
    <form method="POST" enctype="multipart/form-data" style="display:flex; flex-direction:column; gap:12px; max-width:520px;">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
      <input type="hidden" name="action" value="brand">
      <div style="display:flex; align-items:end; gap:16px; flex-wrap:wrap;">
        <label>Primární barva<br>
          <input id="primCol" type="color" name="primary_color" value="{{ brand.primary or '#d4c76f' }}" style="width:60px; height:36px; padding:0; border:none;">
        </label>
        <button type="button" id="btnSwapColors" style="height:36px; align-self:flex-end;">↔ Prohodit barvy</button>
        <label>Sekundární barva<br>
          <input id="secCol" type="color" name="secondary_color" value="{{ brand.secondary or '#000000' }}" style="width:60px; height:36px; padding:0; border:none;">
        </label>
      </div>
      <label>Logo týmu (PNG/JPG)<br>
        <input type="file" name="team_logo" accept="image/*">
      </label>
      <button type="submit">💾 Uložit změny</button>
    </form>
  </div>

  <div class="card">
    <h2>Aktuální logo</h2>
    {% if brand.logo_url %}
      <img src="{{ brand.logo_url }}" alt="Team Logo" style="max-width:300px; background:#fff; border-radius:8px; border:2px solid var(--brand-primary, #d4c76f);">
    {% else %}
      <p><i>Zatím žádné logo</i></p>
    {% endif %}
  </div>

  <div class="card" style="text-align:left;">
    <h2>🔐 Trenérské a hráčské klíče – co dělat při ztrátě</h2>
    <p>
      Přihlášení do týmu probíhá pomocí klíčů pro role <b>Coach</b> a <b>Player</b>. Pokud klíč potřebuješ:
    </p>
    <ul>
      <li><b>Nejprve</b> zkus získat klíč od ostatních členů týmu (trenérů/ hráčů).</li>
      <li>Pokud klíč <b>nikdo nezná</b>, kontaktuj správce na <a href="mailto:martinsnajdr@coachhubhockey.com">martinsnajdr@coachhubhockey.com</a>.</li>
      <li>Správce může bezpečně <b>vygenerovat nový klíč</b> (rotace) – starý přestane ihned fungovat.</li>
    </ul>
    <p style="font-size:14px; opacity:0.85;">
      Pozn.: Nový klíč se vždy zobrazuje jen jednou. Ulož si ho na bezpečné místo a nesdílej veřejně.
    </p>
  </div>

  <div class="card" style="text-align:left;">
    <h2>🗑 Smazat tým</h2>
    <p>Tato akce <b>trvale odstraní</b> celý tým včetně hráčů, soupisek, lajn, cvičení a uložených exportů. Nelze vrátit zpět.</p>
    <form method="POST" class="form-confirm" data-message="Opravdu smazat celý tým? Tuto akci nelze vrátit.">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
      <input type="hidden" name="action" value="delete_team">
      <button type="submit" style="background:#b33; color:#fff;">🗑 Smazat tým</button>
    </form>
  </div>

  {# Sekce členů + účet odstraněna v team-only režimu #}
</div>

{% endblock %}

{% block scripts %}{% endblock %}
